From 5cb2c86f0ae5a8522202505b2b28b264ef524c7e Mon Sep 17 00:00:00 2001
From: parazyd <parazyd@dyne.org>
Date: Sat, 4 Jan 2020 15:46:36 +0100
Subject: [PATCH 7/7] Use cp instead of ln in scripts/package/builddeb.

kexecboot doesn't do symlinks.
---
 scripts/package/builddeb | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)
 mode change 100755 => 100644 scripts/package/builddeb

diff --git a/scripts/package/builddeb b/scripts/package/builddeb
old mode 100755
new mode 100644
index 48d3cb2e060f..a339f7ac429b
--- a/scripts/package/builddeb
+++ b/scripts/package/builddeb
@@ -164,13 +164,13 @@ test -d $debhookdir/$script.d && run-parts --arg="$version" --arg="/$installed_i
 case "$script" in
 postinst)
 	depmod $version
-	rm -f /boot/boot /boot/zImage /boot/omap4-droid4-xt894.dtb
-	ln -s /boot/vmlinuz-$version /boot/zImage
-	ln -s /usr/lib/linux-image-droid4/omap4-droid4-xt894.dtb /boot/omap4-droid4-xt894.dtb
-	ln -s /boot /boot/boot
+	mkdir -p /boot/boot
+	rm -f /boot/boot/zImage /boot/boot/omap4-droid4-xt894.dtb
+	cp -f /boot/vmlinuz-$version /boot/boot/zImage
+	cp -f /usr/lib/linux-image-droid4/omap4-droid4-xt894.dtb /boot/boot/omap4-droid4-xt894.dtb
 	;;
 postrm)
-	rm -f /boot/zImage /boot/boot /boot/omap4-droid4-xt894.dtb
+	rm -f /boot/boot/zImage /boot/boot/omap4-droid4-xt894.dtb
 	;;
 esac
 
-- 
2.25.1

